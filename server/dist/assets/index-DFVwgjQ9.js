import{j as a,w as A,r as C,F as I,m as D}from"./vendor-CUfTd-uA.js";import{a as E,o as T,D as O,c as s,C as n,d as F}from"./index-DqSSY3zI.js";import{D as d}from"./Datatable-B8qkK4hq.js";const o=({title:l,total:e})=>a.jsx("div",{className:"rounded-sm border border-stroke bg-white py-6 px-7.5 shadow-default dark:border-strokedark dark:bg-boxdark",children:a.jsx("div",{className:" flex items-end justify-between",children:a.jsxs("div",{children:[a.jsx("h4",{className:"flex items-center  text-title-md font-bold text-black dark:text-white",children:e}),a.jsx("span",{className:"text-sm font-semibold ",children:l})]})})}),B=E.injectEndpoints({endpoints:l=>({getDashboard:l.mutation({query:e=>({url:"dashboard",method:"POST",body:e}),onQueryStarted:T}),getDashboardTablesData:l.mutation({query:e=>({url:"dashboard/tables",method:"POST",body:e}),onQueryStarted:T})}),overrideExisting:!1}),{useGetDashboardMutation:M,useGetDashboardTablesDataMutation:q}=B,G=[{field:"company",header:"Company Name"},{field:"name",header:"Name"},{field:"stock",header:"Stock"},{field:"lowOnStock",header:"Low On Stock"}],L=[{field:"name",header:"Name"},{field:"remainingAmount",header:"Remaining Amount"},{field:"paymentStatus.name",header:"Payment Status"}],$=[{field:"name",header:"Name"},{field:"remainingAmount",header:"Remaining Amount"},{field:"paymentStatus.name",header:"Payment Status"}],z=[{field:"name",header:"Name"},{field:"remainingAmount",header:"Remaining Amount"},{field:"paymentStatus.name",header:"Payment Status"}],K=()=>{var c,u,h,x,f,b,p,j,g,y,v,w,N,S,k;const[l,{data:e}]=M(),[P,{data:t}]=q(),i=A({resolver:F}),R=async r=>{await l(r),await P(r)},m=C.useMemo(()=>{var r;return Math.ceil(((r=e==null?void 0:e.data)==null?void 0:r.totalRevenue)*.01)},[(c=e==null?void 0:e.data)==null?void 0:c.totalRevenue]);return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"rounded-sm border shadow-default border-stroke bg-white dark:border-strokedark dark:bg-boxdark p-3 ",children:a.jsx(I,{...i,children:a.jsxs("form",{className:"flex gap-4 items-center",onSubmit:i.handleSubmit(R),children:[a.jsx(O,{mode:"range",name:"dateRange",py:"3"}),a.jsx(D,{label:"Filter",raised:!0,size:"small",className:"w-24",type:"submit"})]})})}),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-6  gap-6",children:[a.jsx(o,{title:"Total Purchases",total:s.format(((u=e==null?void 0:e.data)==null?void 0:u.totalPurchase.amount)||0)}),a.jsx(o,{title:"Total Sales",total:s.format(((h=e==null?void 0:e.data)==null?void 0:h.totalSale.amount)||0)}),a.jsx(o,{title:"Total Expenses",total:s.format(((x=e==null?void 0:e.data)==null?void 0:x.totalExpense)||0)}),a.jsx(o,{title:"Total Payable",total:s.format(((f=e==null?void 0:e.data)==null?void 0:f.totalPurchase.remainingAmount)||0)}),a.jsx(o,{title:"Total Recievable",total:s.format(((b=e==null?void 0:e.data)==null?void 0:b.totalSale.remainingAmount)||0)}),a.jsx(o,{title:"Total Revenue",total:`${s.format(((p=e==null?void 0:e.data)==null?void 0:p.totalRevenue)||0)} (${s.format(((j=e==null?void 0:e.data)==null?void 0:j.expectedRevenue)||0)})`}),a.jsx(o,{title:"Total Inventory",total:s.format(((g=e==null?void 0:e.data)==null?void 0:g.totalInventory)||0)}),a.jsx(o,{title:"Cash in Hand",total:s.format(((y=e==null?void 0:e.data)==null?void 0:y.amountInCash)||0)}),a.jsx(o,{title:"Charity Contribution",total:s.format(m>0?m:0)}),a.jsx(o,{title:"Previous Recievable",total:s.format(((v=e==null?void 0:e.data)==null?void 0:v.previousRecievable)||0)})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs(n,{className:"space-y-4",children:[a.jsx("p",{className:"font-semibold text-lg",children:"Total Payable Items"}),a.jsx(d,{rows:5,columns:$,data:(w=t==null?void 0:t.data)==null?void 0:w.payableItems,rowActions:!1,addBtn:!1})]}),a.jsxs(n,{className:"space-y-4",children:[a.jsx("p",{className:"font-semibold text-lg",children:"Total Receivable Items"}),a.jsx(d,{rows:5,columns:L,data:(N=t==null?void 0:t.data)==null?void 0:N.recievableItems,rowActions:!1,addBtn:!1})]}),a.jsxs(n,{className:"space-y-4 overflow-auto",children:[a.jsx("p",{className:"font-semibold text-lg",children:"Low On Stock Items"}),a.jsx(d,{rows:5,columns:G,data:(S=t==null?void 0:t.data)==null?void 0:S.lowOnStockItems,rowActions:!1,addBtn:!1})]}),a.jsxs(n,{className:"space-y-4 overflow-auto",children:[a.jsx("p",{className:"font-semibold text-lg",children:"Total Payable Expenses"}),a.jsx(d,{rows:5,columns:z,data:(k=t==null?void 0:t.data)==null?void 0:k.expenseItems,rowActions:!1,addBtn:!1})]})]})]})]})};export{K as default};
